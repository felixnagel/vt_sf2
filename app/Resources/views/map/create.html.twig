{% extends 'base.html.twig' %}


{% block stylesheets %}
	<link rel="stylesheet" href="{{ asset('css/editor.css') }}" />
{% endblock %}


{% block body_tag %}
	data-ajax_url_load_map="{{ path('editor/load', {map_id: iMapId}) }}"
	data-ajax_url_save_map="{{ path('editor/save') }}"
	data-block_definitions="{{ aBlockDefinitions|json_encode }}"
	data-brushes="{{ aBrushes|json_encode }}"
	data-map_id="{{ iMapId }}"
{% endblock %}

{% block body %}
	<button id="save-button">Save</button>
	<button id="load-button">Load</button>

	<section id="grid-container">
		<div id="grid-outer">
			<section id="grid-inner">
				<div id="paint-brush-container"></div>
			</section>
		</div>
		<div id="horizontal-scrollbar-container">
			<div></div>
		</div>
		<div id="vertical-scrollbar-container">
			<div></div>
		</div>
	</section>

	<section id="block-proto-container">
		{% for sBlockId, aBlock in aBlockDefinitions %}
	        <figure 
	        	class="block"
	        	style="
	        		background-image:url({{ asset(aBlock.src) }});
	        		z-index:{{ aBlock.z }};
	        	"
	        	data-block_id="{{ sBlockId }}"
	        	data-rotation="0"
	        ></figure>
	    {% endfor %}
	</section>

	<section id="brush-container">
		{% for iBrushGroup, aBrushGroup in aBrushes %}
			<section 
				class="lnG lnG-tc-12"
				data-group-id="{{ iBrushGroup }}"
			>
				{% for aBrush in aBrushGroup %}
			        <div class="lnG-tile lnG-col">
				        <figure
				        	class="brush"
				        	style="background-image:url({{ asset(aBrush.src) }})"
				        	data-block_id="{{ aBrush.block_id }}"
				        	data-rotation="0"
				        ></figure>
				    </div>
		    	{% endfor %}
		    </section>
	    {% endfor %}
	</section>
{% endblock %}


{% block javascripts %}
    <script src="{{ asset('js/class/AlphaBlock.class.js') }}"></script>

    <script src="{{ asset('js/class/BlockData.class.js') }}"></script>
    <script src="{{ asset('js/class/Grid.class.js') }}"></script>
    <script src="{{ asset('js/class/TerrainBlock.class.js') }}"></script>

	<script src="{{ asset('js/components/base.component.js') }}"></script>
	
	<script src="{{ asset('js/components/api.component.js') }}"></script>
    <script src="{{ asset('js/lib/fnagel-drag_jquery-plugin.js') }}"></script>

    <script src="{{ asset('js/controller/editor.js') }}"></script>
{% endblock %}